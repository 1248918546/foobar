<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>moments</title>
	<link rel="stylesheet" href="css/moments.css" type="text/css"/>
	<link rel="stylesheet" href="css/friendsUtil.css" type="text/css"/>
	<script language="JavaScript">
        let pages = 0;
        let end = false;
        let synch = false;
        let itemInPages = 5;
        setTimeout("showMoments()", 60000);
        async function onload(){
            loadMoreMoments();
            showFriends();
        }
    </script>
</head>

<body onload="onload()">
<div id="moments_column_1">

	<div id="showUid"  th:text="${uid}" hidden>
	</div>

	<div class = "column_1_show">
		nickname:
		<span id="showNickname" th:text="${nickname}"></span>
	</div>
	<button onclick="showMoments()" class="column_1_button">refreshMoments</button>
    <button onclick="showFriends()" class="column_1_button">showFriends</button>
	<a th:href="@{/logout}"><button class="column_1_button">logout</button></a>

</div>

<div id="moments_column_2">
	<div id="momentContainer">
	</div>
</div>

<div id="moments_column_3">
    <div id="friendsContainer">
    </div>
</div>


<script language="JavaScript">
    let uid = document.getElementById("showUid").innerText;
    window.onscroll = function () {
        //console.log(getDocumentTop(), getWindowHeight(), getScrollTop())
        if (synch && !end && getDocumentTop() + getWindowHeight() == getScrollTop()) {
            synch = false;
            loadMoreMoments();
        }
    };
    window.onresize = function () {
        //console.log(getDocumentTop(), getWindowHeight(), getScrollTop())
        if (synch && !end && getDocumentTop() + getWindowHeight() == getScrollTop()) {
            synch = false;
            loadMoreMoments();
        }
    };
</script>
<script type="text/javascript" src="js/moments.js"></script>
<script type="text/javascript" src="js/utility.js"></script>
<script type="text/javascript" src="js/windowUtil.js"></script>
<script type="text/javascript" src="js/friendsUtil.js"></script>
</body>
</html>